{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"CONTRIBUTING/","title":"Contributing to swarm-external-secrets","text":"<p>Thank you for your interest in contributing to swarm-external-secrets! \ud83c\udf89 This project is a Docker Swarm secrets plugin that integrates with HashiCorp Vault, AWS Secrets Manager, Azure Key Vault, OpenBao, and more. We welcome contributions of all kinds \u2014 bug fixes, new provider support, documentation improvements, and more.</p>"},{"location":"CONTRIBUTING/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Code of Conduct</li> <li>Getting Started</li> <li>Prerequisites</li> <li>Fork &amp; Clone</li> <li>Set Up the Development Environment</li> <li>Project Structure</li> <li>Development Workflow</li> <li>Available Tasks (Makim)</li> <li>Pre-commit Hooks (Lefthook)</li> <li>Building the Plugin</li> <li>Running Tests</li> <li>Linting</li> <li>Submitting a Pull Request</li> <li>Adding a New Provider</li> <li>Documentation</li> <li>Google Summer of Code 2026</li> <li>Getting Help</li> </ul>"},{"location":"CONTRIBUTING/#code-of-conduct","title":"Code of Conduct","text":"<p>This project follows a standard open-source Code of Conduct. Please be respectful, inclusive, and constructive in all interactions. Harassment or abusive behaviour will not be tolerated.</p>"},{"location":"CONTRIBUTING/#getting-started","title":"Getting Started","text":""},{"location":"CONTRIBUTING/#prerequisites","title":"Prerequisites","text":"<p>Make sure the following tools are installed on your system:</p> Tool Version Purpose Go \u2265 1.24 Primary language Docker latest Plugin build &amp; testing Makim latest Task runner Lefthook latest Git hooks manager golangci-lint latest Go linter gosec latest Security scanner goimports latest Import formatter gocyclo latest Cyclomatic complexity checker <p>Install Go tools with:</p> <pre><code>go install golang.org/x/tools/cmd/goimports@latest\ngo install github.com/securego/gosec/v2/cmd/gosec@latest\ngo install github.com/fzipp/gocyclo/cmd/gocyclo@latest\n</code></pre>"},{"location":"CONTRIBUTING/#fork-clone","title":"Fork &amp; Clone","text":"<ol> <li>Fork this repository on GitHub.</li> <li>Clone your fork locally:</li> </ol> <pre><code>git clone https://github.com/&lt;your-username&gt;/swarm-external-secrets.git\ncd swarm-external-secrets\n</code></pre> <ol> <li>Add the upstream remote:</li> </ol> <pre><code>git remote add upstream https://github.com/sugar-org/swarm-external-secrets.git\n</code></pre>"},{"location":"CONTRIBUTING/#set-up-the-development-environment","title":"Set Up the Development Environment","text":"<p>Install Git hooks via the setup script (this configures Lefthook):</p> <pre><code>./setup-hooks.sh\n</code></pre> <p>Install Go module dependencies:</p> <pre><code>go mod download\n</code></pre>"},{"location":"CONTRIBUTING/#project-structure","title":"Project Structure","text":"<pre><code>swarm-external-secrets/\n\u251c\u2500\u2500 main.go            # Plugin entry point\n\u251c\u2500\u2500 driver.go          # Core Docker secrets driver logic\n\u251c\u2500\u2500 utils.go           # Shared utility functions\n\u251c\u2500\u2500 providers/         # Secret provider implementations\n\u2502   \u251c\u2500\u2500 vault/         # HashiCorp Vault / OpenBao\n\u2502   \u251c\u2500\u2500 aws/           # AWS Secrets Manager\n\u2502   \u2514\u2500\u2500 azure/         # Azure Key Vault\n\u251c\u2500\u2500 monitoring/        # Health &amp; metrics dashboard\n\u251c\u2500\u2500 scripts/           # Shell scripts for build, test, deploy\n\u251c\u2500\u2500 docs/              # Documentation sources\n\u251c\u2500\u2500 .makim.yaml        # Makim task definitions\n\u251c\u2500\u2500 lefthook.yml       # Git hook definitions\n\u251c\u2500\u2500 Dockerfile         # Plugin Docker image\n\u2514\u2500\u2500 docker-compose.yml # Local development stack\n</code></pre>"},{"location":"CONTRIBUTING/#development-workflow","title":"Development Workflow","text":""},{"location":"CONTRIBUTING/#available-tasks-makim","title":"Available Tasks (Makim)","text":"<p>This project uses Makim as a task runner. Common tasks are defined in <code>.makim.yaml</code>:</p> Task Command Description Build <code>makim scripts.build</code> Build the plugin image Test <code>makim scripts.test</code> Run all tests Run <code>makim scripts.run</code> Start the plugin locally Deploy <code>makim scripts.deploy</code> Deploy to target environment Cleanup <code>makim scripts.cleanup</code> Remove containers &amp; build artifacts Health check <code>makim scripts.check_plugin_service</code> Check plugin service health Demo rotation <code>makim scripts.demo_rotation</code> Run a secret rotation demo Lint <code>makim scripts.linter</code> Run all linting tools Full CI <code>makim ci.all</code> Run the same steps as CI (build \u2192 test \u2192 health check \u2192 cleanup)"},{"location":"CONTRIBUTING/#pre-commit-hooks-lefthook","title":"Pre-commit Hooks (Lefthook)","text":"<p>Lefthook automatically runs the following checks before each commit:</p> Hook What it does <code>go-tidy</code> Runs <code>go mod tidy</code> and stages <code>go.mod</code>/<code>go.sum</code> <code>go-fmt</code> Formats staged <code>.go</code> files <code>go-vet</code> Runs <code>go vet ./...</code> <code>go-imports</code> Fixes import ordering with <code>goimports</code> <code>golangci-lint</code> Full lint suite with a 10-minute timeout <code>gosec</code> Security scan of all Go code <code>gocyclo</code> Fails if cyclomatic complexity exceeds 17 <code>eof-newline</code> Ensures all staged text files end with a POSIX newline <p>Tip: To skip hooks in an emergency, use <code>git commit --no-verify</code>. Please do not make this a habit.</p>"},{"location":"CONTRIBUTING/#building-the-plugin","title":"Building the Plugin","text":"<pre><code>makim scripts.build\n# or directly:\n./scripts/build.sh\n</code></pre>"},{"location":"CONTRIBUTING/#running-tests","title":"Running Tests","text":"<pre><code>makim scripts.test\n# or directly:\n./scripts/test.sh\n</code></pre>"},{"location":"CONTRIBUTING/#linting","title":"Linting","text":"<pre><code>makim scripts.linter\n# or run golangci-lint directly:\ngolangci-lint run ./... --timeout 10m\n</code></pre>"},{"location":"CONTRIBUTING/#submitting-a-pull-request","title":"Submitting a Pull Request","text":"<ol> <li>Keep <code>main</code> up to date:</li> </ol> <pre><code>git fetch upstream\ngit rebase upstream/main\n</code></pre> <ol> <li>Create a feature branch with a descriptive name:</li> </ol> <pre><code>git checkout -b feat/add-gcp-provider\n# or\ngit checkout -b fix/vault-rotation-timeout\n</code></pre> <ol> <li> <p>Write your code following the existing code style.</p> </li> <li> <p>Ensure all checks pass locally:</p> </li> </ol> <pre><code>makim ci.all\n</code></pre> <ol> <li>Commit your changes. Write clear, concise commit messages in the imperative mood:</li> <li>\u2705 <code>feat: add GCP Secret Manager provider</code></li> <li>\u2705 <code>fix: handle Vault token renewal race condition</code></li> <li> <p>\u274c <code>fixed stuff</code></p> </li> <li> <p>Push your branch and open a Pull Request against <code>main</code>.</p> </li> <li> <p>Fill in the PR template completely \u2014 include a description of the change, how it was tested, and any relevant issue numbers.</p> </li> <li> <p>A maintainer will review your PR. Address feedback promptly.</p> </li> </ol>"},{"location":"CONTRIBUTING/#adding-a-new-provider","title":"Adding a New Provider","text":"<p>To add support for a new secret backend:</p> <ol> <li>Create a new package under <code>providers/&lt;provider-name&gt;/</code>.</li> <li>Implement the provider interface expected by <code>driver.go</code>.</li> <li>Register the provider in <code>driver.go</code> with the appropriate <code>SECRETS_PROVIDER</code> value.</li> <li>Add configuration documentation to <code>docs/MULTI_PROVIDER.md</code>.</li> <li>Add integration tests in <code>scripts/test.sh</code> or a dedicated test script.</li> <li>Update the provider table in <code>readme.md</code>.</li> </ol>"},{"location":"CONTRIBUTING/#documentation","title":"Documentation","text":"<p>Documentation lives in the <code>docs/</code> directory and is built with MkDocs Material.</p> <p>To preview the docs locally:</p> <pre><code>pip install mkdocs-material\nmkdocs serve\n</code></pre> <p>When contributing documentation: - Keep language clear and concise. - Include working code snippets where possible. - Update the relevant guide (<code>MULTI_PROVIDER.md</code>, <code>MONITORING.md</code>, <code>ROTATION.md</code>, etc.) when changing behaviour.</p>"},{"location":"CONTRIBUTING/#google-summer-of-code-2026","title":"Google Summer of Code 2026","text":"<p>swarm-external-secrets is participating in Google Summer of Code 2026 under OpenScienceLabs.</p> <p>If you are a student looking to apply, please review the Project Ideas Wiki and start contributing early. Please focus on small implementations or bugfixes and only change the necessary code,\"less is more.\" PRs that are too long or contain unnecessary changes are impossible to review and will be closed.</p> <p>Feel free to ping us if you need help or use the <code>#gsoc</code> channel on discord.</p>"},{"location":"CONTRIBUTING/#getting-help","title":"Getting Help","text":"<ul> <li>GitHub Issues \u2013 for bug reports and feature requests.</li> <li>GitHub Discussions \u2013 for questions, ideas, and general conversation.</li> <li>Wiki \u2013 for project ideas and longer-form documentation.</li> </ul> <p>We appreciate every contribution, no matter how small. Thank you for helping make swarm-external-secrets better! \ud83d\ude80</p>"},{"location":"debugging/","title":"Debugging","text":"<p>This page covers useful commands for debugging the plugin using HashiCorp Vault.</p>"},{"location":"debugging/#start-a-dev-vault-server","title":"Start a Dev Vault Server","text":"<pre><code>vault server -dev\n</code></pre>"},{"location":"debugging/#create-an-approle","title":"Create an AppRole","text":"<pre><code>vault write auth/approle/role/my-role \\\n    token_policies=\"default,web-app\" \\\n    token_ttl=1h \\\n    token_max_ttl=4h \\\n    secret_id_ttl=24h \\\n    secret_id_num_uses=10\n</code></pre>"},{"location":"debugging/#retrieve-the-role-id","title":"Retrieve the Role ID","text":"<pre><code>vault read auth/approle/role/my-role/role-id\n</code></pre> <p>For automation:</p> <pre><code>vault read -format=json auth/approle/role/my-role/role-id \\\n  | jq -r .data.role_id\n</code></pre>"},{"location":"debugging/#get-the-secret-id","title":"Get the Secret ID","text":"<pre><code>vault write -f auth/approle/role/my-role/secret-id\n</code></pre>"},{"location":"debugging/#login-with-approle","title":"Login with AppRole","text":"<pre><code>vault write auth/approle/login \\\n    role_id=\"192e9220-f35c-c2e9-2931-464696e0ff24\" \\\n    secret_id=\"4e46a226-fdd5-5ed1-f7bb-7b92a0013cad\"\n</code></pre>"},{"location":"debugging/#write-and-attach-policy","title":"Write and Attach Policy","text":"<pre><code>vault policy write db-policy ./db-policy.hcl\n</code></pre> <pre><code>vault write auth/approle/role/my-role \\\n    token_policies=\"db-policy\"\n</code></pre>"},{"location":"debugging/#set-and-get-kv-secrets","title":"Set and Get KV Secrets","text":"<pre><code>vault kv put secret/database/mysql \\\n    root_password=admin \\\n    user_password=admin\n</code></pre> <pre><code>vault kv get secret/database/mysql\n</code></pre>"},{"location":"debugging/#debug-the-plugin","title":"Debug the Plugin","text":"<pre><code>sudo journalctl -u docker.service -f \\\n  | grep plugin_id\n</code></pre> <p>or</p> <pre><code>sudo journalctl -u docker.service -f | grep \"$(docker plugin ls --format '{{.ID}}')\"\n</code></pre>"},{"location":"monitoring/","title":"Monitoring and Performance Guide","text":"<p>The Vault Swarm Plugin includes comprehensive monitoring capabilities to track system performance, secret rotation activity, and overall health.</p>"},{"location":"monitoring/#overview","title":"Overview","text":"<p>The monitoring system tracks:</p> <ul> <li>System resources (memory, goroutines)</li> <li>Secret rotation metrics</li> <li>Provider health status</li> <li>Ticker behavior and timing</li> <li>Error rates and performance</li> </ul>"},{"location":"monitoring/#web-interface","title":"Web Interface","text":"<p>Access the monitoring dashboard at the configured port (default: 8080):</p> <pre><code>http://localhost:8080\n</code></pre>"},{"location":"monitoring/#dashboard-features","title":"Dashboard Features","text":"<ul> <li>Real-time Metrics: Auto-refreshes every 30 seconds</li> <li>Health Status: Overall system health indicator</li> <li>Memory Usage: Allocation, system, and heap memory</li> <li>Goroutine Count: Track concurrent operations</li> <li>Secret Rotation: Success/failure counts and rates</li> <li>Uptime Tracking: Monitor system availability</li> </ul>"},{"location":"monitoring/#api-endpoints","title":"API Endpoints","text":""},{"location":"monitoring/#metrics-json-metrics","title":"<code>/metrics</code> \u2014 JSON Metrics","text":"<p>Returns detailed metrics in JSON format:</p> <pre><code>{\n  \"num_goroutines\": 5,\n  \"mem_alloc_bytes\": 2048576,\n  \"mem_sys_bytes\": 8388608,\n  \"secret_rotations\": 42,\n  \"rotation_errors\": 2,\n  \"ticker_heartbeat\": \"2023-12-01T10:30:00Z\",\n  \"monitoring_start_time\": \"2023-12-01T10:00:00Z\"\n}\n</code></pre>"},{"location":"monitoring/#health-health-check","title":"<code>/health</code> \u2014 Health Check","text":"<p>Returns health status for load balancers:</p> <pre><code>{\n  \"healthy\": true,\n  \"uptime_seconds\": 1800,\n  \"goroutines\": 5,\n  \"memory_usage_mb\": 2,\n  \"total_rotations\": 42,\n  \"rotation_errors\": 2,\n  \"error_rate\": 4.76,\n  \"ticker_healthy\": true\n}\n</code></pre>"},{"location":"monitoring/#apimetrics-prometheus-format","title":"<code>/api/metrics</code> \u2014 Prometheus Format","text":"<p>Returns metrics in Prometheus exposition format:</p> <pre><code># HELP vault_swarm_plugin_goroutines Current number of goroutines\n# TYPE vault_swarm_plugin_goroutines gauge\nvault_swarm_plugin_goroutines 5\n\n# HELP vault_swarm_plugin_memory_bytes Memory usage in bytes\n# TYPE vault_swarm_plugin_memory_bytes gauge\nvault_swarm_plugin_memory_bytes{type=\"alloc\"} 2048576\nvault_swarm_plugin_memory_bytes{type=\"sys\"} 8388608\n</code></pre>"},{"location":"monitoring/#configuration","title":"Configuration","text":""},{"location":"monitoring/#environment-variables","title":"Environment Variables","text":"<pre><code># Enable monitoring (default: true)\nENABLE_MONITORING=true\n\n# Web interface port (default: 8080)\nMONITORING_PORT=8080\n\n# Rotation monitoring interval (default: 10s)\nVAULT_ROTATION_INTERVAL=30s\n</code></pre>"},{"location":"monitoring/#docker-plugin-configuration","title":"Docker Plugin Configuration","text":"<pre><code>docker plugin set swarm-external-secrets:latest \\\n    ENABLE_MONITORING=true \\\n    MONITORING_PORT=9090 \\\n    VAULT_ROTATION_INTERVAL=1m\n</code></pre>"},{"location":"monitoring/#integration-examples","title":"Integration Examples","text":""},{"location":"monitoring/#prometheus-scraping","title":"Prometheus Scraping","text":"<pre><code># prometheus.yml\nscrape_configs:\n  - job_name: 'vault-swarm-plugin'\n    static_configs:\n      - targets: ['localhost:8080']\n    metrics_path: '/api/metrics'\n    scrape_interval: 30s\n</code></pre>"},{"location":"monitoring/#health-check-docker-swarm","title":"Health Check (Docker Swarm)","text":"<pre><code>version: '3.8'\nservices:\n  health-checker:\n    image: curlimages/curl\n    command: |\n      sh -c 'while true; do\n        curl -f http://plugin-host:8080/health || exit 1\n        sleep 30\n      done'\n</code></pre>"},{"location":"monitoring/#grafana-dashboard","title":"Grafana Dashboard","text":"<p>Example queries for Grafana:</p> <pre><code># Memory usage\nvault_swarm_plugin_memory_bytes{type=\"alloc\"}\n\n# Goroutine count\nvault_swarm_plugin_goroutines\n\n# Rotation rate\nrate(vault_swarm_plugin_secret_rotations_total[5m])\n\n# Error rate\nrate(vault_swarm_plugin_rotation_errors_total[5m]) /\nrate(vault_swarm_plugin_secret_rotations_total[5m])\n</code></pre>"},{"location":"monitoring/#troubleshooting","title":"Troubleshooting","text":""},{"location":"monitoring/#high-memory-usage","title":"High Memory Usage","text":"<ol> <li>Check goroutine count for leaks</li> <li>Monitor GC frequency and pause times</li> <li>Review secret tracking overhead</li> </ol>"},{"location":"monitoring/#rotation-failures","title":"Rotation Failures","text":"<ol> <li>Check error rate metrics</li> <li>Verify provider connectivity</li> <li>Review ticker health status</li> </ol>"},{"location":"monitoring/#common-issues","title":"Common Issues","text":"<p>Ticker Unhealthy</p> <ul> <li>Check rotation interval configuration</li> <li>Verify no blocking operations in rotation</li> <li>Monitor for deadlocks or long operations</li> </ul> <p>High Error Rate</p> <ul> <li>Review provider authentication</li> <li>Check network connectivity</li> <li>Validate secret paths and permissions</li> </ul> <p>Memory Growth</p> <ul> <li>Check for goroutine leaks</li> <li>Monitor secret tracker growth</li> <li>Review cleanup operations</li> </ul>"},{"location":"monitoring/#best-practices","title":"Best Practices","text":""},{"location":"monitoring/#production-monitoring","title":"Production Monitoring","text":"<ol> <li>Set up health checks for container orchestration</li> <li>Monitor error rates and set alerts</li> <li>Track memory trends for capacity planning</li> <li>Use Prometheus integration for historical data</li> </ol>"},{"location":"monitoring/#security-considerations","title":"Security Considerations","text":"<ol> <li>Restrict monitoring port access</li> <li>Use HTTPS for production monitoring</li> <li>Avoid exposing metrics externally without authentication</li> <li>Monitor for credential rotation success</li> </ol>"},{"location":"multi-provider/","title":"Multi-Provider Configuration Guide","text":"<p>The Vault Swarm Plugin supports multiple secrets providers, allowing you to use different backends for secret management while maintaining the same Docker Swarm secrets interface.</p>"},{"location":"multi-provider/#supported-providers","title":"Supported Providers","text":""},{"location":"multi-provider/#1-hashicorp-vault-default","title":"1. HashiCorp Vault (default)","text":"<p>Provider Type: <code>vault</code></p> <p>Environment Variables:</p> Variable Description Default <code>VAULT_ADDR</code> Vault server address <code>http://localhost:8200</code> <code>VAULT_TOKEN</code> Vault token for authentication \u2014 <code>VAULT_MOUNT_PATH</code> Mount path for KV engine <code>secret</code> <code>VAULT_AUTH_METHOD</code> Authentication method (<code>token</code>, <code>approle</code>) <code>token</code> <code>VAULT_ROLE_ID</code> Role ID for AppRole authentication \u2014 <code>VAULT_SECRET_ID</code> Secret ID for AppRole authentication \u2014 <p>Example: <pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"vault\" \\\n    VAULT_ADDR=\"https://vault.example.com:8200\" \\\n    VAULT_TOKEN=\"hvs.example-token\"\n</code></pre></p>"},{"location":"multi-provider/#2-aws-secrets-manager","title":"2. AWS Secrets Manager","text":"<p>Provider Type: <code>aws</code></p> <p>Environment Variables:</p> Variable Description Default <code>AWS_REGION</code> AWS region <code>us-east-1</code> <code>AWS_ACCESS_KEY_ID</code> AWS access key \u2014 <code>AWS_SECRET_ACCESS_KEY</code> AWS secret key \u2014 <code>AWS_PROFILE</code> AWS profile name \u2014 <p>Example: <pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"aws\" \\\n    AWS_REGION=\"us-west-2\" \\\n    AWS_ACCESS_KEY_ID=\"AKIAIOSFODNN7EXAMPLE\" \\\n    AWS_SECRET_ACCESS_KEY=\"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\"\n</code></pre></p> <p>Secret Labels:</p> <ul> <li><code>aws_secret_name</code> \u2014 Custom secret name in AWS</li> <li><code>aws_field</code> \u2014 Specific JSON field to extract</li> </ul>"},{"location":"multi-provider/#3-azure-key-vault","title":"3. Azure Key Vault","text":"<p>Provider Type: <code>azure</code></p> <p>Environment Variables:</p> Variable Description <code>AZURE_VAULT_URL</code> Key Vault URL (required) <code>AZURE_TENANT_ID</code> Azure tenant ID <code>AZURE_CLIENT_ID</code> Service principal client ID <code>AZURE_CLIENT_SECRET</code> Service principal secret <code>AZURE_ACCESS_TOKEN</code> Direct access token (alternative) <p>Example: <pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"azure\" \\\n    AZURE_VAULT_URL=\"https://myvault.vault.azure.net/\" \\\n    AZURE_TENANT_ID=\"12345678-1234-1234-1234-123456789012\" \\\n    AZURE_CLIENT_ID=\"87654321-4321-4321-4321-210987654321\" \\\n    AZURE_CLIENT_SECRET=\"client-secret-value\"\n</code></pre></p> <p>Secret Labels:</p> <ul> <li><code>azure_secret_name</code> \u2014 Custom secret name in Azure Key Vault</li> <li><code>azure_field</code> \u2014 Specific JSON field to extract</li> </ul>"},{"location":"multi-provider/#4-openbao","title":"4. OpenBao","text":"<p>Provider Type: <code>openbao</code></p> <p>Environment Variables:</p> Variable Description Default <code>OPENBAO_ADDR</code> OpenBao server address <code>http://localhost:8200</code> <code>OPENBAO_TOKEN</code> OpenBao token for authentication \u2014 <code>OPENBAO_MOUNT_PATH</code> Mount path for KV engine <code>secret</code> <code>OPENBAO_AUTH_METHOD</code> Authentication method (<code>token</code>, <code>approle</code>) <code>token</code> <code>OPENBAO_ROLE_ID</code> Role ID for AppRole authentication \u2014 <code>OPENBAO_SECRET_ID</code> Secret ID for AppRole authentication \u2014 <p>Example: <pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"openbao\" \\\n    OPENBAO_ADDR=\"https://openbao.example.com:8200\" \\\n    OPENBAO_TOKEN=\"ob_example-token\"\n</code></pre></p>"},{"location":"multi-provider/#5-gcp-secret-manager-placeholder","title":"5. GCP Secret Manager (Placeholder)","text":"<p>Provider Type: <code>gcp</code></p> <p>Warning</p> <p>Currently a placeholder implementation. Use other providers for production.</p> <p>Environment Variables:</p> <ul> <li><code>GCP_PROJECT_ID</code> \u2014 Google Cloud project ID (required)</li> <li><code>GOOGLE_APPLICATION_CREDENTIALS</code> \u2014 Path to service account key</li> <li><code>GCP_CREDENTIALS_JSON</code> \u2014 Service account key JSON</li> </ul>"},{"location":"multi-provider/#docker-compose-examples","title":"Docker Compose Examples","text":""},{"location":"multi-provider/#vault-provider","title":"Vault Provider","text":"<pre><code>version: '3.8'\nservices:\n  app:\n    image: nginx\n    secrets:\n      - mysql_password\n    deploy:\n      replicas: 2\n\nsecrets:\n  mysql_password:\n    driver: swarm-external-secrets:latest\n    labels:\n      vault_path: \"database/mysql\"\n      vault_field: \"password\"\n</code></pre>"},{"location":"multi-provider/#aws-secrets-manager","title":"AWS Secrets Manager","text":"<pre><code>secrets:\n  api_key:\n    driver: swarm-external-secrets:latest\n    labels:\n      aws_secret_name: \"prod/api/key\"\n      aws_field: \"api_key\"\n</code></pre>"},{"location":"multi-provider/#azure-key-vault","title":"Azure Key Vault","text":"<pre><code>secrets:\n  database_connection:\n    driver: swarm-external-secrets:latest\n    labels:\n      azure_secret_name: \"database-connection-string\"\n      azure_field: \"connection_string\"\n</code></pre>"},{"location":"multi-provider/#provider-specific-notes","title":"Provider-Specific Notes","text":""},{"location":"multi-provider/#aws-secrets-manager_1","title":"AWS Secrets Manager","text":"<ul> <li>Supports IAM roles, access keys, and profiles</li> <li>JSON secrets are parsed automatically</li> <li>Rotation is supported with native AWS rotation</li> </ul>"},{"location":"multi-provider/#azure-key-vault_1","title":"Azure Key Vault","text":"<ul> <li>Uses REST API with OAuth2 authentication</li> <li>Supports service principals and managed identities</li> <li>Secret names must follow Azure naming conventions</li> </ul>"},{"location":"multi-provider/#openbao","title":"OpenBao","text":"<ul> <li>Fully compatible with Vault API</li> <li>Use for Vault migration or open-source requirements</li> <li>Supports all Vault authentication methods</li> </ul>"},{"location":"multi-provider/#gcp-secret-manager","title":"GCP Secret Manager","text":"<ul> <li>Currently a placeholder \u2014 will error on initialization</li> <li>Future implementation will support service accounts and ADC</li> <li>Use other providers for production workloads</li> </ul>"},{"location":"readme/","title":"Swarm External Secrets","text":""},{"location":"readme/#swarm-external-secrets","title":"Swarm External Secrets","text":"<p>A Docker Swarm secrets plugin that integrates with multiple secret management providers including HashiCorp Vault, AWS Secrets Manager, Azure Key Vault, and OpenBao.</p>"},{"location":"readme/#updates","title":"\ud83d\ude80 Updates","text":""},{"location":"readme/#google-summer-of-code-2026","title":"\ud83c\udf93 Google Summer of Code 2026","text":"<p>swarm-external-secrets is participating in Google Summer of Code 2026 incubated under the  organization OpenScienceLabs!</p> <p>For more information, check out GSoC Contribution Guidelines</p>"},{"location":"readme/#architecture","title":"Architecture","text":""},{"location":"readme/#documentation","title":"Documentation","text":"<p>Please refer to the docs for more information.</p>"},{"location":"readme/#supported-providers","title":"Supported Providers","text":""},{"location":"readme/#features","title":"Features","text":"<ul> <li>Multi-Provider Support: HashiCorp Vault, AWS Secrets Manager, Azure Key Vault, OpenBao</li> <li>Multiple Auth Methods: Support for various authentication methods per provider</li> <li>Automatic Secret Rotation: Monitor providers for changes and automatically update Docker secrets and services</li> <li>Real-time Monitoring: Web dashboard with system metrics, health status, and performance tracking</li> <li>Flexible Path Mapping: Customize secret paths and field extraction per provider</li> <li>Production Ready: Includes proper error handling, logging, cleanup, and monitoring</li> <li>Backward Compatible: Existing Vault configurations continue to work unchanged</li> </ul>"},{"location":"readme/#new-multi-provider-support","title":"New: Multi-Provider Support","text":"<p>The plugin now supports multiple secret providers. Configure with <code>SECRETS_PROVIDER</code> environment variable:</p> <pre><code># HashiCorp Vault (default)\ndocker plugin set swarm-external-secrets:latest SECRETS_PROVIDER=\"vault\"\n\n# AWS Secrets Manager  \ndocker plugin set swarm-external-secrets:latest SECRETS_PROVIDER=\"aws\"\n\n# Azure Key Vault\ndocker plugin set swarm-external-secrets:latest SECRETS_PROVIDER=\"azure\"\n\n# OpenBao\ndocker plugin set swarm-external-secrets:latest SECRETS_PROVIDER=\"openbao\"\n</code></pre>"},{"location":"readme/#new-real-time-monitoring","title":"New: Real-time Monitoring","text":"<p>Access the monitoring dashboard at <code>http://localhost:8080</code> (configurable port):</p> <ul> <li>System Metrics: Memory usage, goroutine count, GC statistics</li> <li>Secret Rotation: Success/failure rates, error tracking</li> <li>Health Status: Overall system health and provider connectivity</li> <li>Performance Tracking: Response times, ticker health, uptime</li> </ul>"},{"location":"readme/#monitor-configuration","title":"Monitor Configuration","text":"<pre><code>docker plugin set swarm-external-secrets:latest \\\n    ENABLE_MONITORING=\"true\" \\\n    MONITORING_PORT=\"8080\"\n</code></pre>"},{"location":"readme/#installation","title":"Installation","text":"<ol> <li> <p>Build and enable the plugin:    <pre><code>./scripts/build.sh\n</code></pre></p> </li> <li> <p>Configure the plugin:    <pre><code>docker plugin set swarm-external-secrets:latest \\\n    VAULT_ADDR=\"https://your-vault-server:8200\" \\\n    VAULT_AUTH_METHOD=\"token\" \\\n    VAULT_TOKEN=\"your-vault-token\" \\\n    VAULT_ENABLE_ROTATION=\"true\"\n</code></pre></p> </li> <li> <p>Use in docker-compose.yml:</p> </li> </ol> <p>HashiCorp Vault: <pre><code>secrets:\n  mysql_password:\n    driver: swarm-external-secrets:latest\n    labels:\n      vault_path: \"database/mysql\"\n      vault_field: \"password\"\n</code></pre></p> <p>AWS Secrets Manager: <pre><code>secrets:\n  api_key:\n    driver: swarm-external-secrets:latest\n    labels:\n      aws_secret_name: \"prod/api/key\"\n      aws_field: \"api_key\"\n</code></pre></p> <p>Azure Key Vault: <pre><code>secrets:\n  database_connection:\n    driver: swarm-external-secrets:latest\n    labels:\n      azure_secret_name: \"database-connection-string\"\n</code></pre></p> <p>OpenBao: <pre><code>secrets:\n  app_secret:\n    driver: swarm-external-secrets:latest\n    labels:\n      openbao_path: \"app/config\"\n      openbao_field: \"secret_key\"\n</code></pre></p> Provider Status Authentication Rotation HashiCorp Vault \u2705 Stable Token, AppRole \u2705 AWS Secrets Manager \u2705 Stable IAM, Access Keys \u2705 Azure Key Vault \u2705 Stable Service Principal, Access Token \u2705 OpenBao \u2705 Stable Token, AppRole \u2705 GCP Secret Manager \ud83d\udea7 Placeholder - -"},{"location":"readme/#quick-start-examples","title":"Quick Start Examples","text":""},{"location":"readme/#hashicorp-vault","title":"HashiCorp Vault","text":"<pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"vault\" \\\n    VAULT_ADDR=\"https://vault.example.com:8200\" \\\n    VAULT_TOKEN=\"hvs.example-token\"\n</code></pre>"},{"location":"readme/#aws-secrets-manager","title":"AWS Secrets Manager","text":"<pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"aws\" \\\n    AWS_REGION=\"us-west-2\" \\\n    AWS_ACCESS_KEY_ID=\"AKIAIOSFODNN7EXAMPLE\"\n</code></pre>"},{"location":"readme/#azure-key-vault","title":"Azure Key Vault","text":"<pre><code>docker plugin set swarm-external-secrets:latest \\\n    SECRETS_PROVIDER=\"azure\" \\\n    AZURE_VAULT_URL=\"https://myvault.vault.azure.net/\" \\\n    AZURE_TENANT_ID=\"12345678-1234-1234-1234-123456789012\"\n</code></pre>"},{"location":"readme/#license","title":"License","text":"<p>BSD-3-Clause license</p>"},{"location":"rotation/","title":"Secret Rotation","text":"<p>This document describes the automatic secret rotation feature of the Swarm External Secrets plugin.</p>"},{"location":"rotation/#overview","title":"Overview","text":"<p>The plugin automatically monitors secrets in Vault and updates the corresponding Docker Swarm secrets and services when changes are detected. This ensures that applications always use the latest secret values without manual intervention.</p>"},{"location":"rotation/#how-it-works","title":"How It Works","text":"<ol> <li> <p>Secret Tracking: When a Docker service requests a secret, the plugin tracks the mapping between the Docker secret and its corresponding Vault path.</p> </li> <li> <p>Background Monitoring: A background goroutine periodically checks Vault for changes to tracked secrets by comparing SHA256 hashes of secret values.</p> </li> <li> <p>Automatic Rotation: When a change is detected:</p> </li> <li>A new version of the Docker secret is created with the updated value</li> <li>Services using the secret are automatically updated to trigger redeployment</li> <li>The old secret version is removed</li> </ol>"},{"location":"rotation/#configuration","title":"Configuration","text":"<p>The following environment variables control the rotation behavior:</p> Variable Description Default <code>VAULT_ENABLE_ROTATION</code> Enable/disable automatic rotation <code>true</code> <code>VAULT_ROTATION_INTERVAL</code> How often to check for changes <code>5m</code>"},{"location":"rotation/#example-configuration","title":"Example Configuration","text":"<pre><code># Enable rotation with 2-minute check interval\ndocker plugin set swarm-external-secrets:latest \\\n    VAULT_ENABLE_ROTATION=\"true\" \\\n    VAULT_ROTATION_INTERVAL=\"2m\"\n\n# Disable rotation\ndocker plugin set swarm-external-secrets:latest \\\n    VAULT_ENABLE_ROTATION=\"false\"\n</code></pre>"},{"location":"rotation/#usage-example","title":"Usage Example","text":"<ol> <li> <p>Deploy a service with Vault secrets:    <pre><code>secrets:\n  mysql_password:\n    driver: swarm-external-secrets:latest\n    labels:\n      vault_path: \"database/mysql\"\n      vault_field: \"password\"\n</code></pre></p> </li> <li> <p>Update the secret in Vault:    <pre><code>vault kv put secret/database/mysql password=new_secure_password\n</code></pre></p> </li> <li> <p>Automatic rotation: Within the next rotation interval (default 5 minutes), the plugin will:</p> </li> <li>Detect the change in Vault</li> <li>Update the Docker secret with the new value</li> <li>Force update services using the secret</li> </ol>"},{"location":"rotation/#monitoring","title":"Monitoring","text":"<p>Check plugin logs to monitor rotation activity:</p> <pre><code># View plugin logs\nsudo journalctl -u docker.service -f | grep vault\n\n# Check for rotation events\ndocker service logs &lt;service-name&gt;\n</code></pre>"},{"location":"rotation/#benefits","title":"Benefits","text":"<ul> <li>Zero downtime: Services are updated gracefully</li> <li>Automatic synchronization: No manual intervention required</li> <li>Security: Old secrets are automatically cleaned up</li> <li>Auditability: All rotation events are logged</li> </ul>"},{"location":"rotation/#limitations","title":"Limitations","text":"<ul> <li>Services must support graceful secret updates (restart when secrets change)</li> <li>Rotation frequency is limited by the configured interval</li> <li>Docker Swarm must be running in manager mode for secret management</li> </ul>"},{"location":"rotation/#troubleshooting","title":"Troubleshooting","text":"<p>If rotation is not working:</p> <ol> <li>Check if rotation is enabled: <code>VAULT_ENABLE_ROTATION=true</code></li> <li>Verify plugin has access to Docker socket</li> <li>Ensure plugin is running on a manager node</li> <li>Check plugin logs for error messages</li> <li>Verify Vault connectivity and permissions</li> </ol>"},{"location":"rotation/#security-considerations","title":"Security Considerations","text":"<ul> <li>The plugin requires Docker socket access to manage secrets and services</li> <li>Ensure proper Vault authentication and minimal required permissions</li> <li>Monitor logs for unauthorized rotation attempts</li> <li>Consider using shorter rotation intervals for highly sensitive secrets</li> </ul>"}]}